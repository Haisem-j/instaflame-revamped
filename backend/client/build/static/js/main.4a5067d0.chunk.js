(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,s,t){"use strict";t.r(s);var c=t(1),a=t(16),n=t.n(a),i=t(9),r=t(6),l=t(25),o=t(13),j=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGGED_IN":return!0===e.payload;default:return!1}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1?arguments[1]:void 0;switch(s.type){case"TOKEN_TRUE":return s.payload;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1?arguments[1]:void 0;switch(s.type){case"USER_NAME":return s.payload;default:return e}},m=Object(o.c)({loggedIn:j,setToken:d,getUser:b}),h=t(3),u=t.n(h),O=t(7),p=function(e){return{type:"LOGGED_IN",payload:e}},x=function(e){return{type:"TOKEN_TRUE",payload:e}},f="http://localhost:8000/api",g="http://localhost:8000/images",v=t(0);var N=Object(r.b)((function(e){return e}),{isLoggedIn:p})((function(e){var s=function(){var s=Object(O.a)(u.a.mark((function s(){var t;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,e.isLoggedIn(!1),s.next=4,fetch("".concat(f,"/auth/logout"),{headers:{jwt:e.setToken}});case 4:return t=s.sent,s.next=7,t.json();case 7:s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),console.log("err");case 12:case"end":return s.stop()}}),s,null,[[0,9]])})));return function(){return s.apply(this,arguments)}}();return Object(v.jsxs)("nav",{className:"navbar is-spaced custom-center",role:"navigation","aria-label":"main navigation",children:[Object(v.jsx)("div",{className:"navbar-brand",children:Object(v.jsx)(i.b,{to:"/",children:Object(v.jsxs)("div",{className:"navbar-item",children:[Object(v.jsx)("span",{className:"icon is-size-1 right",children:Object(v.jsx)("ion-icon",{name:"flame"})}),Object(v.jsx)("h1",{className:"is-size-4",children:"InstaFlame"})]})})}),Object(v.jsxs)("div",{className:"navbar-menu",children:[Object(v.jsx)("div",{className:"navbar-start auto-left",children:Object(v.jsx)("div",{className:"navbar-item",children:Object(v.jsx)("input",{className:"input",type:"text",placeholder:"Search Users"})})}),Object(v.jsxs)("div",{className:"navbar-end",children:[Object(v.jsx)(i.b,{to:"/profile/".concat(e.getUser),children:Object(v.jsx)("div",{className:"navbar-item right",children:Object(v.jsx)("span",{className:"icon is-size-1",children:Object(v.jsx)("ion-icon",{name:"person"})})})}),Object(v.jsx)(i.b,{to:"/upload",children:Object(v.jsx)("div",{className:"navbar-item right",children:Object(v.jsx)("span",{className:"icon is-size-1",children:Object(v.jsx)("ion-icon",{name:"cloud-upload"})})})}),Object(v.jsx)("div",{className:"navbar-item btn",onClick:s,children:Object(v.jsx)("span",{className:"icon is-size-1",children:Object(v.jsx)("ion-icon",{name:"power"})})})]})]})]})})),y=t(4);var k=Object(r.b)((function(e){return e}),{isLoggedIn:p,loginToken:x,setUser:function(e){return{type:"USER_NAME",payload:e}}})((function(e){var s=Object(c.useState)(""),t=Object(y.a)(s,2),a=t[0],n=t[1],r=Object(c.useState)(""),l=Object(y.a)(r,2),o=l[0],j=l[1],d=Object(c.useState)(!1),b=Object(y.a)(d,2),m=b[0],h=b[1],p=Object(c.useState)("Something went wrong...."),x=Object(y.a)(p,2),g=x[0],N=x[1],k=function(){var s=Object(O.a)(u.a.mark((function s(t){var c,n,i;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.preventDefault(),c={username:a,password:o},console.log("user here"),console.log(c),s.prev=4,s.next=7,fetch("".concat(f,"/auth/login"),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 7:return n=s.sent,s.next=10,n.json();case 10:(i=s.sent).success?(e.setUser(c.username),e.loginToken(i.data.token),e.isLoggedIn(!0)):(N(i.msg),h(!0)),s.next=18;break;case 14:s.prev=14,s.t0=s.catch(4),console.log(s.t0),h(!0);case 18:case"end":return s.stop()}}),s,null,[[4,14]])})));return function(e){return s.apply(this,arguments)}}();return Object(v.jsx)("section",{className:"hero has-background-light is-fullheight ",children:Object(v.jsx)("div",{className:"custom-login",children:Object(v.jsxs)("div",{className:"box",children:[Object(v.jsxs)("div",{className:"custom-flex",children:[Object(v.jsx)("span",{className:"icon is-size-1",style:{marginTop:"5px"},children:Object(v.jsx)("ion-icon",{name:"flame"})}),Object(v.jsx)("h1",{className:"is-size-4",children:"InstaFlame"})]}),Object(v.jsxs)("form",{onSubmit:k,children:[!0===m?Object(v.jsx)("div",{className:"button is-danger m-bottom",children:g}):"",Object(v.jsx)("div",{className:"field",children:Object(v.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(v.jsx)("input",{className:"input",type:"user",name:"username",placeholder:"Username",onChange:function(e){return n(e.target.value)}}),Object(v.jsx)("span",{className:"icon is-small is-left",children:Object(v.jsx)("i",{className:"fas fa-envelope"})}),Object(v.jsx)("span",{className:"icon is-small is-right",children:Object(v.jsx)("i",{className:"fas fa-check"})})]})}),Object(v.jsx)("div",{className:"field",children:Object(v.jsxs)("p",{className:"control has-icons-left",children:[Object(v.jsx)("input",{className:"input",type:"password",name:"password",placeholder:"Password",onChange:function(e){return j(e.target.value)}}),Object(v.jsx)("span",{className:"icon is-small is-left",children:Object(v.jsx)("i",{className:"fas fa-lock"})})]})}),Object(v.jsx)("div",{className:"field",children:Object(v.jsxs)("p",{className:"control custom-login-button",children:[Object(v.jsx)("button",{className:"button is-success is-small",children:"Login"}),Object(v.jsx)(i.b,{to:"/register",children:Object(v.jsx)("button",{className:"button is-info is-small",children:"Sign Up"})})]})})]})]})})})}));var w=function(){var e=Object(c.useState)(""),s=Object(y.a)(e,2),t=s[0],a=s[1],n=Object(c.useState)(""),r=Object(y.a)(n,2),l=r[0],o=r[1],j=Object(c.useState)(""),d=Object(y.a)(j,2),b=d[0],m=d[1],h=Object(c.useState)(!1),p=Object(y.a)(h,2),x=p[0],g=p[1],N=Object(c.useState)(!1),k=Object(y.a)(N,2),w=k[0],S=k[1],T=Object(c.useState)("Something went wrong...."),I=Object(y.a)(T,2),E=I[0],U=I[1],z=function(){var e=Object(O.a)(u.a.mark((function e(s){var c,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),c={username:t,password:b,email:l},e.prev=2,s.target.reset(),e.next=6,fetch("".concat(f,"/auth/registerUser"),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 6:return a=e.sent,e.next=9,a.json();case 9:n=e.sent,console.log(n),n.success?g(!0):(U(n.msg),S(!0)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),S(!0);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(s){return e.apply(this,arguments)}}();return Object(v.jsx)("section",{className:"hero has-background-light is-fullheight ",children:Object(v.jsx)("div",{className:"custom-login",children:Object(v.jsxs)("div",{className:"box",children:[Object(v.jsxs)("div",{className:"custom-flex",children:[Object(v.jsx)("span",{className:"icon is-size-1",style:{marginTop:"5px"},children:Object(v.jsx)("ion-icon",{name:"flame"})}),Object(v.jsx)("h1",{className:"is-size-4",children:"InstaFlame"})]}),!0===x?Object(v.jsx)("div",{className:"button is-success m-bottom",children:"Username ".concat(t," created successfully!!")}):"",!0===w?Object(v.jsx)("div",{className:"button is-danger m-bottom",children:E}):"",Object(v.jsxs)("form",{onSubmit:z,children:[Object(v.jsx)("div",{className:"field",children:Object(v.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(v.jsx)("input",{className:"input",type:"username",placeholder:"Username",onChange:function(e){return a(e.target.value)}}),Object(v.jsx)("span",{className:"icon is-small is-left",children:Object(v.jsx)("i",{className:"fas fa-envelope"})}),Object(v.jsx)("span",{className:"icon is-small is-right",children:Object(v.jsx)("i",{className:"fas fa-check"})})]})}),Object(v.jsx)("div",{className:"field",children:Object(v.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(v.jsx)("input",{className:"input",type:"email",placeholder:"Email",onChange:function(e){return o(e.target.value)}}),Object(v.jsx)("span",{className:"icon is-small is-left",children:Object(v.jsx)("i",{className:"fas fa-envelope"})}),Object(v.jsx)("span",{className:"icon is-small is-right",children:Object(v.jsx)("i",{className:"fas fa-check"})})]})}),Object(v.jsx)("div",{className:"field",children:Object(v.jsxs)("p",{className:"control has-icons-left",children:[Object(v.jsx)("input",{className:"input",type:"password",placeholder:"Password",onChange:function(e){return m(e.target.value)}}),Object(v.jsx)("span",{className:"icon is-small is-left",children:Object(v.jsx)("i",{className:"fas fa-lock"})})]})}),Object(v.jsxs)("div",{className:"field",children:[Object(v.jsx)("p",{className:"control custom-login-button",children:Object(v.jsx)("button",{className:"button is-info is-small",children:"Sign Up"})}),Object(v.jsx)("div",{className:"content flex-center",children:Object(v.jsxs)("p",{className:"is-size-7",children:["Already have an account?"," ",Object(v.jsx)(i.b,{to:"/login",className:"no-link",children:"Login here."})]})})]})]})]})})})};var S=Object(r.b)((function(e){return e}),null)((function(e){var s=Object(c.useState)(!1),t=Object(y.a)(s,2),a=t[0],n=t[1],r=function(){var s=Object(O.a)(u.a.mark((function s(){var t;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a){s.next=13;break}return s.prev=1,s.next=4,fetch("".concat(f,"/posts/like/").concat(e.post.imageId),{headers:{jwt:e.setToken}});case 4:return t=s.sent,s.next=7,t.json();case 7:n(!0),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}}),s,null,[[1,10]])})));return function(){return s.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"card custom-card-bottom",children:[Object(v.jsxs)("div",{className:"card-content",children:[Object(v.jsxs)("div",{className:"media",children:[Object(v.jsx)("div",{className:"media-left",children:Object(v.jsx)("figure",{className:"image is-32x32",children:Object(v.jsx)("img",{className:"is-rounded",src:"https://bulma.io/images/placeholders/96x96.png",alt:"Placeholder"})})}),Object(v.jsx)("div",{className:"media-content",children:Object(v.jsx)(i.b,{to:"/profile/".concat(e.post.profileId),children:Object(v.jsx)("p",{className:"title is-size-6",children:e.post.profileId})})})]}),Object(v.jsx)("div",{className:"card-image",children:Object(v.jsx)("figure",{className:"image is-4by3",children:Object(v.jsx)("img",{src:"".concat(g,"/").concat(e.post.imageId),alt:"Placeholder"})})}),Object(v.jsxs)("div",{className:"media-content",children:[Object(v.jsx)("span",{className:"icon is-size-4 icon-padding ".concat(a?"heart":""),onClick:r,children:Object(v.jsx)("i",{className:"fas fa-heart"})}),Object(v.jsx)("span",{className:"icon is-size-4 icon-padding",children:Object(v.jsx)("i",{className:"far fa-comment"})})]}),Object(v.jsxs)("p",{className:"subtitle is-size-7 p-margin",children:[a?e.post.likes+1:e.post.likes," likes"]}),Object(v.jsx)("div",{className:"content",children:e.post.desc})]}),Object(v.jsx)("footer",{className:"card-footer",children:Object(v.jsx)("input",{className:"input",type:"text",style:{border:"none"},placeholder:"Add a comment..."})})]})}));var T=Object(r.b)((function(e){return e}),null)((function(e){var s=Object(c.useState)([]),t=Object(y.a)(s,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){(function(){var s=Object(O.a)(u.a.mark((function s(){var t,c;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,fetch("".concat(f,"/posts/getAll"),{method:"GET",headers:{jwt:e.setToken}});case 3:return t=s.sent,s.next=6,t.json();case 6:return c=s.sent,s.abrupt("return",c.data.posts);case 10:s.prev=10,s.t0=s.catch(0),console.log(s.t0);case 13:case"end":return s.stop()}}),s,null,[[0,10]])})));return function(){return s.apply(this,arguments)}})()().then((function(e){return n(e)}))}),[e.setToken]),Object(v.jsx)("section",{className:"section has-background-light custom-border-top",children:Object(v.jsxs)("div",{className:"columns custom-body-center",children:[Object(v.jsx)("div",{className:"column is-10",children:Object(v.jsx)("div",{className:"container",children:0===a.length?Object(v.jsx)("div",{children:"LOOOOOOOOOOOADING......."}):a.map((function(e){return Object(v.jsx)(S,{post:e},e.imageId)}))})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsx)("div",{className:"menu",children:Object(v.jsxs)("article",{className:"media center",children:[Object(v.jsx)("figure",{className:"media-left",children:Object(v.jsx)("span",{className:"image is-48x48 ",children:Object(v.jsx)("img",{className:"is-rounded",src:"https://previews.123rf.com/images/alphaspirit/alphaspirit1504/alphaspirit150400118/38665682-simple-young-man-face-smiling-and-optimistic.jpg",alt:"man smiling"})})}),Object(v.jsx)("div",{className:"media-content",style:{width:"105px"},children:Object(v.jsx)("div",{className:"content",children:Object(v.jsx)("p",{className:"is-size-6",style:{margin:"0px"},children:Object(v.jsx)("strong",{children:e.getUser})})})})]})})})]})})}));var I=Object(r.b)((function(e){return e}))((function(e){return Object(v.jsxs)("div",{className:"columns",children:[Object(v.jsx)("div",{className:"column is-one-third",children:Object(v.jsx)("figure",{className:"image is-128x128 center-container",children:Object(v.jsx)("img",{className:"is-rounded",src:"https://bulma.io/images/placeholders/96x96.png",alt:"Placeholder "})})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"media-content",children:[Object(v.jsxs)("article",{className:"media custom-profile-margin",children:[Object(v.jsx)("figure",{className:"media-left",children:Object(v.jsx)("h1",{className:"title",children:e.name})}),Object(v.jsx)("div",{className:"media-content",children:Object(v.jsx)("button",{className:"button",children:"Edit Profile"})})]}),Object(v.jsx)("h2",{className:"subtitle-5 custom-followers",children:Object(v.jsxs)("span",{children:[e.posts," posts"]})}),Object(v.jsx)("h1",{className:"title is-6 is-spaced",children:"Toronto"})]})})]})}));var E=Object(r.b)((function(e){return e}))((function(e){var s=function(){var s=Object(O.a)(u.a.mark((function s(){var t;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,fetch("".concat(f,"/posts/del/").concat(e.post),{method:"DELETE",headers:{jwt:e.setToken}});case 3:return t=s.sent,s.next=6,t.json();case 6:e.history.push("/home"),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),console.log(s.t0);case 12:case"end":return s.stop()}}),s,null,[[0,9]])})));return function(){return s.apply(this,arguments)}}();return e.name===e.getUser?Object(v.jsx)("div",{className:"column is-one-third",style:{marginTop:"-20px"},children:Object(v.jsxs)("figure",{className:"image is-1x1",children:[Object(v.jsx)("div",{className:"x-logo delete is-medium",onClick:s}),Object(v.jsx)("img",{src:"".concat(g,"/").concat(e.post),alt:"Placeholder"})]})}):Object(v.jsx)("div",{className:"column is-one-third",children:Object(v.jsx)("figure",{className:"image is-1x1",children:Object(v.jsx)("img",{src:"".concat(g,"/").concat(e.post),alt:"Placeholder"})})})}));var U=Object(r.b)((function(e){return e}),null)((function(e){var s=Object(c.useState)(""),t=Object(y.a)(s,2),a=t[0],n=t[1],i=Object(c.useState)([]),r=Object(y.a)(i,2),l=r[0],o=r[1];return Object(c.useEffect)((function(){(function(){var s=Object(O.a)(u.a.mark((function s(){var t,c,a;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.location.pathname.split("/"),s.next=4,fetch("".concat(f,"/posts/profile/").concat(t[2]),{method:"GET",headers:{jwt:e.setToken}});case 4:return c=s.sent,s.next=7,c.json();case 7:return a=s.sent,s.abrupt("return",{posts:a.data,tempName:t[2]});case 11:s.prev=11,s.t0=s.catch(0),console.log(s.t0);case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(){return s.apply(this,arguments)}})()().then((function(e){n(e.tempName),o(e.posts)}))}),[e.location.pathname,e.setToken]),Object(v.jsx)("section",{className:"section has-background-light custom-border-top",children:Object(v.jsxs)("div",{className:"custom-body-center",children:[Object(v.jsx)(I,{posts:l.length,name:a}),Object(v.jsx)("section",{className:"section custom-border-top",children:Object(v.jsx)("div",{className:"columns is-multiline",children:0===l.length?Object(v.jsx)("div",{children:"LOOOOOOOOOOOADING......."}):l.map((function(s){return Object(v.jsx)(E,{post:s.imageId,name:a,history:e.history},s.imageId)}))})})]})})}));var z=Object(r.b)((function(e){return e}),{isLoggedIn:p,loginToken:x})((function(e){var s=Object(c.useState)(!1),t=Object(y.a)(s,2),a=t[0],n=t[1],i=Object(c.useState)(""),r=Object(y.a)(i,2),l=r[0],o=r[1],j=function(){var s=Object(O.a)(u.a.mark((function s(t){var c,a,i;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.preventDefault(),s.prev=1,c=t.target.file,(a=new FormData).append("image",c.files[0]),a.append("description",l),a.append("username",e.getUser),s.next=9,fetch("".concat(f,"/posts/upload"),{method:"POST",headers:{jwt:e.setToken},body:a});case 9:return i=s.sent,s.next=12,i.json();case 12:"Token is expired"===s.sent.msg?(e.loginToken(""),e.isLoggedIn(!1)):n(!0),s.next=19;break;case 16:s.prev=16,s.t0=s.catch(1),console.log(s.t0);case 19:case"end":return s.stop()}}),s,null,[[1,16]])})));return function(e){return s.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"hero has-background-light custom-border-top is-fullheight",children:Object(v.jsx)("div",{className:"custom-container-create-post",children:Object(v.jsxs)("div",{className:"custom-create-post",children:[Object(v.jsx)("h1",{className:"title",style:{textAlign:"center"},children:"Upload Image"}),a?Object(v.jsx)("div",{className:"notification is-success",style:{textAlign:"center"},children:" Image Successfully Uploaded!! "}):null,Object(v.jsx)("form",{onSubmit:j,children:Object(v.jsxs)("fieldset",{children:[Object(v.jsxs)("div",{className:"field",children:[Object(v.jsx)("label",{className:"label",children:"Description"}),Object(v.jsx)("div",{className:"control",children:Object(v.jsx)("textarea",{className:"textarea",placeholder:"Enter description here...",name:"description",onChange:function(e){return o(e.target.value)}})})]}),Object(v.jsx)("div",{className:"file",style:{marginBottom:"15px"},children:Object(v.jsxs)("label",{className:"file-label",children:[Object(v.jsx)("input",{className:"file-input",type:"file",name:"file",id:"file"}),Object(v.jsxs)("span",{className:"file-cta",children:[Object(v.jsx)("span",{className:"file-icon",children:Object(v.jsx)("i",{className:"fas fa-upload"})}),Object(v.jsx)("span",{className:"file-label",children:"Choose a file\u2026"})]})]})}),Object(v.jsxs)("div",{className:"field is-grouped",style:{justifyContent:"center"},children:[Object(v.jsx)("div",{className:"control",children:Object(v.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(v.jsx)("div",{className:"control",children:Object(v.jsx)("button",{className:"button is-link is-light",children:"Cancel"})})]})]})})]})})})})),C=t(5);var L=Object(r.b)((function(e){return e}),null)((function(e){return Object(v.jsx)("div",{children:e.loggedIn?Object(v.jsxs)("div",{children:[Object(v.jsx)(N,{}),Object(v.jsxs)(C.d,{children:[Object(v.jsx)(C.b,{exact:!0,path:"/login",children:Object(v.jsx)(C.a,{to:"/home"})}),Object(v.jsx)(C.b,{exact:!0,path:"/register",children:Object(v.jsx)(C.a,{to:"/home"})}),Object(v.jsx)(C.b,{exact:!0,path:"/home",component:T}),Object(v.jsx)(C.b,{exact:!0,path:"/",children:Object(v.jsx)(C.a,{to:"/home"})}),Object(v.jsx)(C.b,{exact:!0,path:"/profile/:profile",component:U}),Object(v.jsx)(C.b,{exact:!0,path:"/upload",component:z}),Object(v.jsx)(w,{})]})]}):Object(v.jsx)("div",{children:Object(v.jsxs)(C.d,{children:[Object(v.jsx)(C.b,{exact:!0,path:"/",children:Object(v.jsx)(C.a,{to:"/login"})}),Object(v.jsx)(C.b,{exact:!0,path:"/home",children:Object(v.jsx)(C.a,{to:"/login"})}),Object(v.jsx)(C.b,{exact:!0,path:"/profile/:profile",children:Object(v.jsx)(C.a,{to:"/login"})}),Object(v.jsx)(C.b,{exact:!0,path:"/upload",children:Object(v.jsx)(C.a,{to:"/login"})}),Object(v.jsx)(C.b,{exact:!0,path:"/login",component:k}),Object(v.jsx)(C.b,{exact:!0,path:"/register",component:w})]})})})})),P=Object(o.d)(m,Object(o.a)(l.a));n.a.render(Object(v.jsx)(r.a,{store:P,children:Object(v.jsx)(i.a,{children:Object(v.jsx)(L,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.4a5067d0.chunk.js.map